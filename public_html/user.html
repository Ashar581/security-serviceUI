<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Dashboard</title>
    <link rel="stylesheet" href="user.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
</head>
<body>
<div id="loadingBar"></div>    
    <header>
        <div class="menu-toggle" onclick="openNav()"><span>&#9776;</span></div>
        <div class="welcome-message" id="welcomeMessage"></div>
        <div class="actions">
            <div class="emergency-button">SOS</div>

            <div class="profile-icon" onclick="showLogoutConfirmation()">
                <svg class="logout-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <path d="M16 13v-2H7V8l-5 4 5 4v-3zM20 3H4c-1.1 0-2 .9-2 2v4h2V5h16v14H4v-4H2v4c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"/>
                </svg>
            </div>

            <div id="logoutConfirmationModal" class="modal">
                <div class="modal-content">
                    <span class="close" onclick="closeLogoutConfirmation()">&times;</span>
                    <p>Are you sure you want to logout?</p>
                    <button onclick="logout()">Yes</button>
                    <button onclick="closeLogoutConfirmation()">No</button>
                </div>
            </div>
        </div>
    </header>
    <div id="mySidebar" class="sidebar">
        <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">Ã—</a>
        <a href="profile.html">Your Profile</a>
        <a href="permission.html">Permissions</a>
        <a href="security.html">Security</a>
    </div>
    <nav>
        <button id="documents-tab" class="active">DOCUMENTS</button>
        <button id="location-tab">LOCATION</button>
    </nav>
    <main>
        <section id="documents-section" class="active">
            <div class="toolbar">
                <div class="search-bar">
                    <input type="text" placeholder="Search..." />
                    <button><i class="fa fa-microphone"></i></button>
                </div>
                <div class="actions">
                    <form id="fileUploadForm">
                        <input type="hidden" id="userId" name="userId" value="1"> <!-- Replace with actual user ID -->
                        <label for="file" class="custom-file-upload">
                            Choose File
                        </label>
                        <input type="file" id="file" name="file" required>
                        <button id="new-document" type="submit">Upload</button>
                    </form>
                </div>
            </div>
            
            <div class="documents-list">
                <div class="documents-list" id="fileList">
                    <div class="show-all">SHOW ALL</div>
                </div>
            </div>
        </section>
        <section id="location-section">
            <div class="actions">
                <button id="new-document">View Location</button>
                <button id="new-folder"> Request Location</button>
            </div>
                <div id="map" style="height: 400px; width: 100%;"></div>
        </section>
    </main>
<!-- File Content Popup -->
<div id="fileContentPopup" class="popup hide">
    <div id="fileContent" class="file-content"></div>
    <button id="closeFileContentBtn" class="close-btn">X</button>
</div>
<!--    Error Popup-->
    <div class="popup" id="popup">
        <span class="close-btn" id="closeBtn">&times;</span>
        <div id="popupMessage"></div>
    </div>
    <div class="footer">
        <p>&copy; 2024 Securellance. All rights reserved.<br>Developer By Ashar Shahab & Neha Shaw</p>
    </div>
    <script src="user.js"></script>
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
</body>
</html>
